{{ template "_header.html" . }}

{{ template "_onboard.html" . }}

<link href="/resources2/css/cards.css" rel="stylesheet">

<style>
    .user-menu-bd {
        border-radius: 0.25rem;
    }

    .user-menu-bd:hover {
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
    }
</style>

<!-- top nav bar -->
<div style="height:3rem; position:fixed; top:0; bottom:0; left:0; right:0; z-index:2; background-color:black; backdrop-filter: blur(10px);">
    <div style="display:flex; flex-direction:row; padding-left:0.75rem;">
        <img style="height:3rem; padding:0.5rem;" src="/resources2/images/sparker_code_transp_large.png">
        <div style="font-weight:500; padding-top:0.75rem; padding-left:0.25rem; font-size:1.25rem;">
            Sparker
        </div>
    </div>

    <div x-data @click="onboard_open()" style="position:fixed; top:0; right:0; height:2.5rem; width:100%; text-align: end;">
        {{ if .LoggedIn }}
            <div class="thm-bg-hl utls-tip user-menu-bd" style="margin-left:auto; margin:0.4rem; padding:0.5rem; height:2.25rem; padding-left:1rem; padding-right:0.7rem;">
                <i class="fa-solid fa-user-check"></i>
                <div 
                class="utls-tiptext utls-tiptext-align-right"
                style="background-color:var(--thm-hl); height:12rem; max-width:15rem; width:15rem; border-radius: 0; text-align:left;
                border-bottom-left-radius:0.25rem; border-top-left-radius:0.25rem; border-bottom-right-radius:0.25rem;">
                    <div style="border-radius:0.25rem; padding:0.5rem; display:flex; flex-direction:row; flex-wrap: wrap;">
                        <span style="font-weight:500; white-space:nowrap;">{{ .User.Name }}</span>
                        <span style="margin-left:auto; white-space:nowrap;">@{{ .User.Username }}</span>
                    </div>
                    <div style="margin-bottom:0.5rem;">
                        <a href="/settings" style="text-decoration:none;">
                            <div style="padding:0.5rem; background-color:black; border-radius:0.25rem;">
                                Settings
                            </div>
                        </a>
                    </div>
                    <div style="margin-bottom:0.5rem;">
                        <a href="/new" style="text-decoration:none;">
                            <div style="padding:0.5rem; background-color:black; border-radius:0.25rem;">
                                New Course
                            </div>
                        </a>
                    </div>
                    <div style="margin-bottom:0.5rem;">
                        <a href="/logout" style="text-decoration:none;">
                            <div style="padding:0.5rem; background-color:black; border-radius:0.25rem;">
                                Logout
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        {{ else }}
            <div @click="onboard_open()" style="padding:0.65rem; font-weight: 400; padding-right:1rem;">
                <button class="utls-bd thm-bg-hl" style="padding:0.25rem; padding-left:0.5rem; padding-right:0.5rem; margin-right:0.5rem; box-shadow: 0 0 0.5rem var(--thm-hl-a);">
                    signup
                </button>
                <span style="padding:0.25rem;">login</span>
            </div>
        {{ end }}
    </div>
</div>

<div class="align-center-horizontal" style="width:100vw;">
    <!-- title and gradient -->
    <div style="margin-top:3.2rem; padding-left:1rem; padding-right:1rem; min-height:840px; padding-top:2rem; background:linear-gradient(black, var(--thm-hl));">
        <div style="text-align:center; max-width:100%; padding-top:1rem;">
            <div style="padding-bottom:5rem;">

                {{ if .LoggedIn }}
                    <!-- title -->
                    <div style="text-align: center;">
                        <div style="margin-top:5rem; font-size:3rem; font-weight: 600;">
                            Welcome {{ .User.Name }}!
                        </div>
                        <a href="/paper/minecraft-unity" style="text-decoration:none;">
                            <div style="display:flex; flex-direction:row;">
                                <div style="margin-left:auto; margin-right:auto; margin-top:3rem; 
                                padding:1rem; background-color:var(--thm-hl); font-size:1rem; font-weight: 500;
                                padding-left:2rem; padding-right:2rem; border-radius: 0.25rem;;">
                                    Discover coding a Minecraft Terrain System
                                </div>
                            </div>
                        </a>
                    </div>

                {{ else }}
                    <!-- title -->
                    <div style="text-align: center;">
                        <div style="margin-top:5rem; font-size:3rem; font-weight: 600;">
                            Sparker <br> Voxel Terrain Courses
                        </div>
                        <a href="/paper/minecraft-unity" style="text-decoration:none;">
                            <div style="display:flex; flex-direction:row;">
                                <div style="margin-left:auto; margin-right:auto; margin-top:3rem; 
                                padding:1rem; background-color:var(--thm-hl); font-size:1rem; font-weight: 500;
                                padding-left:2rem; padding-right:2rem; border-radius: 0.25rem;;">
                                    Get started <i class="fa-solid fa-arrow-right-long"></i>
                                </div>
                            </div>
                        </a>
                    </div>
                {{ end }}
            </div>

            <div style="text-align:left;">
                <!-- courses -->
                <div class="cards">
                    {{ range .Courses }}
                        {{ if eq .ImageURL "" }}
                        <div class="card" style="background-image:url('{{ .Release.ImageURL }}');">
                        {{ else }}
                        <div class="card" style="background-image:url('{{ .ImageURL }}');">
                        {{ end }}
                            <div class="card-content">
                                <div style="margin-top:auto; font-size:2rem; font-weight:600;">{{ .Title }}</div>
                                <div style="display:flex; flex-direction:row;">
                                    <div style="font-weight:500; padding-top:0.5rem;">by {{ .User.Username }}</div>
                                    <a 
                                    style="margin-left:auto; padding:0.5rem; color:var(--thm-hl); font-weight:500;"
                                    href="/{{ .User.Username }}/{{ .Name }}">
                                        learn more
                                        <i style="color:var(--thm-hl);" class="fa-solid fa-angle-right"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {{ end }}
                </div>
                
            </div>
            
        </div>
    </div>
</div>

{{ if .AuthoredCourses }}
    <div style="background-color:var(--thm-bg);" id="browse_allCoursesID">
        <div style="text-align:center; width:100%; padding-top:5rem; padding-bottom:1rem;">
            <h1 style="font-size:2.5rem;">Authored Courses</h1>
        </div>

        <!-- search bar
        <div style="padding:1rem; margin-bottom:5rem; display:flex;">
            <input placeholder="search..." style="border-bottom-left-radius:0.25rem; border-top-left-radius:0.25rem;">
            <button style="padding-right:1rem; padding-left:1rem; border-bottom-right-radius: 0.25rem; border-top-right-radius: 0.25rem;">
                <i class="fa-solid fa-magnifying-glass"></i>
            </button>
        </div>
        -->

        <!-- courses -->
        <div class="cards">
            {{ range .AuthoredCourses }}
                <div class="card" style="background-image:url('{{ .Release.ImageURL }}');">
                    <div class="card-content">
                        <div style="margin-top:auto; font-size:2rem; font-weight:600;">{{ .Title }}</div>
                        <div style="display:flex; flex-direction:row;">
                            <div style="font-weight:500; padding-top:0.5rem;">by {{ .User.Username }}</div>
                            <a 
                            style="margin-left:auto; padding:0.5rem; color:var(--thm-hl); font-weight:500;"
                            href="/{{ .User.Username }}/{{ .Name }}">
                                view
                                <i style="color:var(--thm-hl);" class="fa-solid fa-angle-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            {{ end }}
        </div>
    </div>
{{ end }}

{{ if .OwnedCourses }}
<div style="background-color:var(--thm-bg);">
    <div style="text-align:center; width:100%; padding-top:5rem; padding-bottom:1rem;">
        <h1 style="font-size:2.5rem;">My Courses</h1>
    </div>
    <div class="cards">
        {{ range .OwnedCourses }}
            <div class="card" style="background-image:url('{{ .Release.ImageURL }}');">
                <div class="card-content">
                    <div style="margin-top:auto; font-size:2rem; font-weight:600;">{{ .Course.Title }}</div>
                    <div style="display:flex; flex-direction:row;">
                        <div style="font-weight:500; padding-top:0.5rem;">by {{ .Course.User.Username }}</div>
                        <a 
                        style="margin-left:auto; padding:0.5rem; color:var(--thm-hl); font-weight:500;"
                        href="/{{ .Course.User.Username }}/{{ .Course.Name }}">
                            continue
                            <i style="color:var(--thm-hl);" class="fa-solid fa-angle-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        {{ end }}
    </div>
</div>
{{ end }}

{{ template "_info.html" . }}

{{ template "_footer.html" . }}